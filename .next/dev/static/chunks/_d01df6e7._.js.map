{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/marc/AITUBE-NEW/marctubud-pixel-AITUBEV1/app/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\n// ðŸ‘‡ ç›´æŽ¥æŠŠå¼•å·é‡Œçš„å†…å®¹æ›¿æ¢æˆä½ åœ¨ Supabase åŽå°çœ‹åˆ°çš„çœŸå®žæ•°æ®\nconst supabaseUrl = 'https://muwpfhwzfxocqlcxbsoa.supabase.co'\nconst supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im11d3BmaHd6ZnhvY3FsY3hic29hIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4ODI4NjEsImV4cCI6MjA4MTQ1ODg2MX0.GvW2cklrWrU1wyipjSiEPfA686Uoy3lRFY75p_UkNzo'\n\n// åˆ›å»ºå®¢æˆ·ç«¯\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey)\n"],"names":[],"mappings":";;;;AAAA;;AAEA,uCAAuC;AACvC,MAAM,cAAc;AACpB,MAAM,kBAAkB;AAGjB,MAAM,WAAW,IAAA,0LAAY,EAAC,aAAa"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///Users/marc/AITUBE-NEW/marctubud-pixel-AITUBEV1/contexts/user-context.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useEffect, useState, useCallback } from 'react';\n// ðŸ”´ ä¿®å¤ï¼šå°† @/lib... æ”¹ä¸ºç›¸å¯¹è·¯å¾„ã€‚\n// æ ¹æ®ä½  Profile é¡µé¢çš„å¼•ç”¨ï¼Œlib åº”è¯¥åœ¨ app/libï¼Œæ‰€ä»¥è·¯å¾„å¦‚ä¸‹ï¼š\nimport { supabase } from '../app/lib/supabaseClient'; \n// âš ï¸ å¦‚æžœå†æ¬¡æŠ¥é”™ï¼Œè¯·å°è¯•æ”¹ä¸º '../lib/supabaseClient' (å¦‚æžœ lib åœ¨æ ¹ç›®å½•)\n\nimport { User } from '@supabase/supabase-js';\n\n// å®šä¹‰ Profile ç±»åž‹\ntype UserProfile = {\n  id: string;\n  username: string | null;\n  avatar_url: string | null;\n  points: number;\n  is_vip: boolean;\n  vip_expires_at: string | null;\n  free_quota: number;\n  last_check_in: string | null;\n};\n\ntype UserContextType = {\n  user: User | null;\n  profile: UserProfile | null;\n  isLoading: boolean;\n  refreshProfile: () => Promise<void>; \n};\n\nconst UserContext = createContext<UserContextType | undefined>(undefined);\n\nexport function UserProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [profile, setProfile] = useState<UserProfile | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // æ ¸å¿ƒèŽ·å–é€»è¾‘\n  const fetchUserData = useCallback(async () => {\n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n      \n      if (!session) {\n        setUser(null);\n        setProfile(null);\n        setIsLoading(false);\n        return;\n      }\n\n      setUser(session.user);\n\n      // èŽ·å–æœ€æ–°çš„ Profile æ•°æ®\n      const { data: profileData, error } = await supabase\n        .from('profiles')\n        .select('*')\n        .eq('id', session.user.id)\n        .single();\n\n      if (error) {\n        console.error('Error fetching profile:', error);\n      } else {\n        setProfile(profileData);\n      }\n    } catch (error) {\n      console.error('Unexpected error:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // ç›‘å¬ Auth å˜åŒ–\n  useEffect(() => {\n    const { data: { subscription } } = supabase.auth.onAuthStateChange((event, session) => {\n      if (event === 'SIGNED_IN' || event === 'TOKEN_REFRESHED') {\n        fetchUserData();\n      } else if (event === 'SIGNED_OUT') {\n        setUser(null);\n        setProfile(null);\n        setIsLoading(false);\n      }\n    });\n\n    fetchUserData();\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [fetchUserData]);\n\n  return (\n    <UserContext.Provider value={{ user, profile, isLoading, refreshProfile: fetchUserData }}>\n      {children}\n    </UserContext.Provider>\n  );\n}\n\nexport function useUser() {\n  const context = useContext(UserContext);\n  if (context === undefined) {\n    throw new Error('useUser must be used within a UserProvider');\n  }\n  return context;\n}"],"names":[],"mappings":";;;;;;;AAEA;AACA,2BAA2B;AAC3B,4CAA4C;AAC5C;;;AALA;;;AA6BA,MAAM,4BAAc,IAAA,8KAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAAiC;;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAqB;IAC3D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,SAAS;IACT,MAAM,gBAAgB,IAAA,4KAAW;mDAAC;YAChC,IAAI;gBACF,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,GAAG,MAAM,2IAAQ,CAAC,IAAI,CAAC,UAAU;gBAE5D,IAAI,CAAC,SAAS;oBACZ,QAAQ;oBACR,WAAW;oBACX,aAAa;oBACb;gBACF;gBAEA,QAAQ,QAAQ,IAAI;gBAEpB,mBAAmB;gBACnB,MAAM,EAAE,MAAM,WAAW,EAAE,KAAK,EAAE,GAAG,MAAM,2IAAQ,CAChD,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,QAAQ,IAAI,CAAC,EAAE,EACxB,MAAM;gBAET,IAAI,OAAO;oBACT,QAAQ,KAAK,CAAC,2BAA2B;gBAC3C,OAAO;oBACL,WAAW;gBACb;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,qBAAqB;YACrC,SAAU;gBACR,aAAa;YACf;QACF;kDAAG,EAAE;IAEL,aAAa;IACb,IAAA,0KAAS;kCAAC;YACR,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,2IAAQ,CAAC,IAAI,CAAC,iBAAiB;0CAAC,CAAC,OAAO;oBACzE,IAAI,UAAU,eAAe,UAAU,mBAAmB;wBACxD;oBACF,OAAO,IAAI,UAAU,cAAc;wBACjC,QAAQ;wBACR,WAAW;wBACX,aAAa;oBACf;gBACF;;YAEA;YAEA;0CAAO;oBACL,aAAa,WAAW;gBAC1B;;QACF;iCAAG;QAAC;KAAc;IAElB,qBACE,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;YAAW,gBAAgB;QAAc;kBACpF;;;;;;AAGP;GA9DgB;KAAA;AAgET,SAAS;;IACd,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB"}}]
}